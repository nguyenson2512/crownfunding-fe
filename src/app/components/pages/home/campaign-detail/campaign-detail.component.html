<div class="flex flex-col mx-16 my-4" *ngIf="campaignInfo$ | async as campaignInfo">
  <div class="title-container my-2 text-center mb-3">
    <p class="text-2xl font-semibold text-slate-900">{{campaignInfo?.title}}</p>
    <p class="text-base font-medium text-slate-700 mt-1">{{campaignInfo?.subTitle}}</p>
  </div>

  <div class="flex w-full justify-between mt-4">
    <div class="flex flex-col grow">
      <div class="campaign-image-container">
        <img class="campaign-image object-cover" [src]="campaignInfo?.image">
      </div>
      <div class="flex gap-x-1">
        <div class="flex items-center mr-4">
          <button mat-icon-button><mat-icon>bookmark_border</mat-icon></button> {{ "button.saveCampaign" | trans }}
        </div>
        <div class="flex items-center mr-3">
          <mat-icon>category</mat-icon>{{ campaignInfo?.category?.name }}
        </div>
        <div class="flex items-center">
          <mat-icon>location_on</mat-icon>{{ campaignInfo?.location }}
        </div>
      </div>
    </div>
    <div class="w-1/3 flex flex-col ml-6">
      <div class="my-4">
        <p class="text-2xl font-semibold text-blue-700">
          100000 {{ campaignInfo?.currency}}
        </p>
        <p class="text-base">pledged of {{ campaignInfo?.currency}} {{ campaignInfo?.fundingGoal}} goal</p>
      </div>
      <div class="mb-4">
        <p class="text-2xl font-semibold text-indigo-700">6777</p>
        <p class="text-base">backers</p>
      </div>
      <div class="my-4">
        <p class="text-2xl font-semibold text-indigo-700">22</p>
        <p class="text-base">days to go</p>
      </div>
      <button mat-raised-button color="primary" class="mb-4">
        {{ "button.backCampaign" | trans }}
      </button>
      <div>
        <p class="font-m">
          This project will only be funded if it reaches its goal by {{ campaignInfo?.duration | date:'full'}}
        </p>
      </div>
    </div>
  </div>

  <div class="mx-4">
    <mat-tab-group animationDuration="0ms">
      <mat-tab>
        <ng-template mat-tab-label>{{ "campaignManagement.overview" | trans }}</ng-template>
        <div>
          <h3 class="mt-3">{{ "campaignManagement.story" | trans }}</h3>
          <div [innerHTML]="campaignInfo?.story | keepHtml"></div>
          <br />
          <h3 class="mt-3">{{ "campaignManagement.risks" | trans }}</h3>
          <div [innerHTML]="campaignInfo?.risk | keepHtml"></div>
        </div>
      </mat-tab>
      <mat-tab>
        <ng-template mat-tab-label>{{ "campaignManagement.comment" | trans }}</ng-template>
        <!-- TODO: FIX ASYNC TWICE -->
        <div>
          <app-comment-form (comment)="handleComment($event)"></app-comment-form>
          <div *ngIf="(comments$| async)?.length > 0; else noComment">
            <div *ngFor="let item of (comments$ | async)">
              <app-comment-item [commentItem]="item"></app-comment-item>
            </div>
          </div>
          <ng-template #noComment>
            <div class="p-8">{{ 'campaignManagement.noComment' | trans }}</div>
          </ng-template>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

</div>
